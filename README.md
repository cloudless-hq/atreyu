# atreyu

## Getting started

#### 1. Install environment dependencies.

You need to have the following tools installed on your machine:

- [Node.js](https://nodejs.org/) (>=16). We recommend using a version manager like [nvm](https://github.com/nvm-sh/nvm) or [asdf](https://github.com/asdf-vm/asdf).
- [Yarn](https://yarnpkg.com/) (>=1.22.10).
- [Deno](https://deno.land/).
- [IPFS Cli](https://ipfs.io/). Installation instructions are [here](https://docs.ipfs.io/install/command-line/).

After following each installation steps, check if everything is working:

```bash
node --version
yarn --version
deno --version
ipfs --version
```

You should get the version of each tool printed without any errors.

#### 2. Configure [Deno scripts](https://deno.land/manual/tools/script_installer) to be available on your PATH.

You can achieve that by adding `export PATH="$HOME/.deno/bin:$PATH"` to your rc file.

#### 3. Install dependencies and build the project.

```bash
yarn install
yarn build
```

#### 4. Install `ayu` CLI.

This step installs a [Deno script](https://deno.land/manual/tools/script_installer) (`ayu`) on your machine.

Run:

```bash
deno install --allow-hrtime --allow-read --allow-env=DENO_DIR,HOME --allow-net=127.0.0.1:5001,api.cloudflare.com,api.pinata.cloud --allow-write="$TMPDIR","$HOME"/.atreyu,./,"$DENO_DIR" --allow-run=ipfs,`which deno`,yarn,rollup --no-check --prompt --unstable -n ayu -f ./cli/mod.js
```

If everything is green, you should have `ayu` available on your terminal.

```bash
which ayu # prints the path for the binary
ayu # prints the help text
```

PS: Prompts are not enabled automatically by `deno install`, if you want to be prompted, add the `--prompt` parameter to beginning of the script.

```bash
code `which ayu`
```

```diff
#!/bin/sh
# generated by deno install
-exec deno run --allow-read <...lots of other things...>
+exec deno run --prompt --allow-read <...lots of other things...>
```

#### 5. Initialize IPFS.

Initializes an IPFS volume on `~/.atreyu`.

```bash
ayu init
```

#### 6. Start atreyu daemon.

```
ayu start
```

#### 7. Start atreyu local dev server.

```bash
ayu dev
```

The dev daemon can be killed after the success message when not working on atreyu internals.
